<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<title>Page Title</title>
</head>
<body>

    <div>
        <a href="/registrate" style="visibility: visible;" id="registerPageLink"> Register page </a><br>
        <a href="/login" style="visibility: visible;" id="loginPageLink"> Login Page </a><br>
        <a href="/create-post" style="visibility: hidden;" id="createPost"> Create post </a><br>
        <a href="/user-posts" style="visibility: hidden;" id="userPosts"> User Post </a><br>
    </div>
    
    <header> 
        <h3><p id="userFullName"></p></h3>
        <input style="visibility: hidden;" type="button" id="logOut" name="logOut" value="Log out">
    </header> 
    
    <h1 id="textHeading">My First Heading</h1>
    <p id="textParagraph">My first paragraph.</p>

    <input type="text" name="input" id="changeTextInput">

</body>

<script type="text/javascript">
    let token = localStorage.getItem('token');
    let prefix = "Bearer";
    if (token){
        $( "#loginPageLink").css( "visibility", "hidden" );
        $( "#registerPageLink").css( "visibility", "hidden" );
        $("#createPost").css("visibility","visible")
        $("#userPosts").css("visibility","visible")
        $("#logOut").css("visibility","visible");
        $.ajax({
            url: "/api/v1/user-info",
            method: "GET",
            headers: {"Authorization": `${prefix} ${token}`},
            success: function(result){
                $("#userFullName").text(result.info);
            }
        })
    }
    $("#logOut").on("click", function(){
        localStorage.clear();
        location.reload();
    });
</script>

<script type="text/javascript">
    $( "#changeTextInput" ).on('input', function() {
        console.log(this);
        var incomeText = $(this).val();
        $( "#textHeading" ).text(incomeText);
        $( "#textParagraph" ).text(incomeText);
    });
</script>
</html>